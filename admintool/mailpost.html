<section class="m-3">
    <div class="hero">
        <div class="hero-body">
            <p class="title">メール配信</p>
            <p class="subtitle">ユーザーを限定して送信する場合はT/Fフィルターを作成し、８列目に配置してください</p>
        </div>
    </div>
    <div class="m-6">
        <!-- フォームの部品 -->
        <div class="my-4">
            <label for="title">タイトル</label>
            <input type="text" id="title" name="title" class="input" placeholder="配信されるメールのタイトルとして設定されます" />
        </div>
        <div class="my-4">
            <label for="content">備考</label><br />
            <textarea id="content" class="input"></textarea>
        </div>
        <input type="submit" value="配信する" class="button is-outline is-info" id="btn" />
    </div>
</section>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    var btn = document.getElementById('btn');
    btn.addEventListener('click', function () {
        btn.value = '送信中...';
        $(function () {
            google.script.run.withSuccessHandler(showThings).sendData('mail_send', document.getElementById('title').value, document.getElementById('content').value);
        });
    });
    function showThings(things) {
        message = '成功しました\n';
        window.alert(message);
        document.getElementById('title').value = '';
        document.getElementById('content').value = '';
        btn.value = '登録する';
    }
</script>
